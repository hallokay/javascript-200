<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>javascript200</title>
</head>
<body>

    <form action="" id="card-form" onsubmit="submitForm()">
        <div>
            <label for="">카드 번호</label>
            <input type="text" name="cardNumber">
        </div>
        <div>
            <label for="">이름</label>
            <input type="text" name="holderName">
        </div>
        <button type="submit">결제하기</button>
    </form>
    <script>
     
     function submitForm () {
         const form = document.getElementById('card-form');
         const formData = new FormData(form);
            //주어진 폼 요소에 대한 FormData를 생성한다 
    // FormData는 XMLHttpRequest를 통해 서버에 데이터를 전달할 때 사용할 수 있다
    //FormData를 폼 요소로부터 생성하면 인풋 요소의 name 어트리뷰트를 통해 value값을 가져올수 있다

    // FormData는 new키워드를 통해 직접 생성 append 메소드를 통해 이름에 해당하는 값을 추가할수도 있다
    //FormData를 이용하면 파일과 같은 Blob데이터를 전송할 수도 있다
    
         const formObj = {
             cardNumber: formData.get('cardNumber'),
             holderName: formData.get('holderName'),
         }
         //부모 윈도우에 메세지를 전달할 formObj를 정의 postMessage에는 formData형식의 객체가 전달되지 않기 때문에 
         //별도의 객체를 정의하여 전달해야한다
         window.parent.postMessage(formObj, '*');
         //window의 부모객체는 iframe이 작성된 부모 window객체를 가르킨다
        //  그리고 postMessage는 메세지를 보낼 대상 window 객체를 통해 호출해야한다 
        //  그래서 부모window객체의 postMessage를 호출한다
        //postMessage의 첫번쨰 인자는 전달할 메세지이고두번쨰 인자는 대상 window객체의 출처 작성
        //* 은 어떤 출처도 가리지 않음을 의미 --출처는 URL 또는 *로 작성해야 한다
    
     }

    //submit버튼을 누르면 호출할 함수



    </script>
    
   
</body>


</html>